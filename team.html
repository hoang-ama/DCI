<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Our Team — DCI</title>
    <link rel="icon" type="image/x-icon" href="./image/favicon.png">
    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
    /* Team page scoped styles */
    /* Ensure page-footer layout so footer stays at bottom on short pages */
    body.page-with-footer { min-height: 100vh; display: flex; flex-direction: column; }
    body.page-with-footer main { flex: 1 0 auto; }

    .news-hero { padding: 30px 5%; }
    .news-hero-inner { max-width:1100px; margin:0 auto; }
    .team-main { max-width:1100px; margin:40px auto; padding:0 5%; }
    .team-grid { display:grid; grid-template-columns: repeat(3,1fr); gap:24px; }
    .team-card { background:#fff; border-radius:12px; overflow:hidden; cursor:pointer; transition:transform .22s ease, box-shadow .22s ease; box-shadow:0 8px 24px rgba(0,0,0,0.06); }
    .team-card img { width:100%; height:320px; object-fit:cover; display:block; transform-origin:center; transition:transform .28s ease; }
    .team-card:hover img { transform:scale(1.1); }
    .team-card .card-body { padding:14px 16px; }
    .team-card h3 { margin:0 0 6px 0; font-size:1.05rem; }
    .team-card p { margin:0; color:var(--grey-text); }

    /* Popup panel on the right */
    /* overlay must sit above footer and cover entire viewport */
    .team-overlay { position:fixed; left:0; top:0; width:100%; height:100vh; display:none; z-index:9999; }
    .team-overlay.show { display:block; }
    .team-overlay .backdrop { position:absolute; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.35); }
    /* panel fills viewport height and scrolls internally */
    .team-panel { position:fixed; right:0; top:0; width:50%; height:100vh; background:#fff; box-shadow:-8px 0 40px rgba(0,0,0,0.12); transform:translateX(100%); transition:transform .28s ease; z-index:10000; overflow:auto; }
    .team-overlay.show .team-panel { transform:translateX(0); }

    /* panel inner and top image */
    .team-panel .panel-inner { padding:0; max-width:100%; margin:0; padding-bottom:72px; box-sizing:border-box; } /* bottom padding so content doesn't butt against edge */
    .team-panel .panel-top-img {
        width:100%;
        height:320px;
        object-fit:cover;            /* cover fills the area, no empty space */
        background:transparent;
        padding:0;
        box-sizing:border-box;
        border-radius:12px 12px 0 0;
        display:block;
        margin:0;
    }

    /* body below the image: left meta column (30%), right bio (70%) */
    .team-panel .panel-body { display:flex; gap:32px; align-items:flex-start; padding:28px; }
    .team-panel .panel-left { flex:0 0 30%; min-width:160px; text-align:left; }
    .team-panel .panel-left h2 { font-size:1.5rem; margin:0 0 8px 0; text-align:left; }
    .team-panel .panel-left .panel-title { color:#ED664D; font-weight:500; margin-bottom:16px; text-align:left; }
    /* Social icon links below title */
    .team-panel .panel-left .social-links { display:flex; gap:12px; margin-top:16px; }
    .team-panel .panel-left .social-links a { display:inline-flex; align-items:center; justify-content:center; width:40px; height:40px; border-radius:50%; background:#666; color:#FFF; text-decoration:none; transition:background .2s ease; }
    .team-panel .panel-left .social-links a:hover { background:#ED664D; color:#fff; }
    .team-panel .panel-left .social-links i { font-size:20px; }

    .team-panel .panel-right { flex:1; color:var(--grey-text); line-height:1.7; }
    .team-panel .panel-right p { margin-top:0; }

    /* responsive: stack on small screens */
    @media (max-width:900px) {
        .team-panel .panel-top-img { height:220px; }
        .team-panel .panel-body { display:block; padding:20px; }
        .team-panel .panel-left { flex:1; margin-bottom:20px; text-align:left; }
        .team-panel .panel-left .social-links { margin-top:12px; }
        .team-panel .panel-right { margin-top:0; }
    }
    .team-panel h2 { margin-top:18px; }
    .team-panel p { line-height:1.6; color:var(--grey-text); }
    .team-panel .links { margin-top:18px; }

    /* Round (nut) close button in top-right of panel */
    .team-panel .close-btn {
        position:absolute;
        right:14px;
        top:14px;
        width:44px;
        height:44px;
        border-radius:50%;
        background:#0a0a0a;
        color:#fff;
        border:0;
        font-size:20px;
        line-height:1;
        cursor:pointer;
        display:flex;
        align-items:center;
        justify-content:center;
        box-shadow:0 6px 18px rgba(0,0,0,0.15);
    }

    @media (max-width:900px) {
        .team-grid { grid-template-columns: repeat(1,1fr); }
        .team-panel { width:100%; }
    }
    </style>
</head>
<body class="page-with-footer">

    <header class="site-header site-header--large-logo">
        <nav class="navbar">
            <a href="/" class="logo" aria-label="DCI home">
                <img src="./image/DCI_logo_color.svg" alt="DCI Logo" class="nav-logo">
            </a>
            <ul class="nav-links">
                <li><a href="/#mission">Our Mission</a></li>
                <li><a href="/#portfolio">Portfolio</a></li>
                <li><a href="about.html">About Us</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <button class="menu-toggle" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button> <!-- Added menu toggle button -->
  
        </nav>
    </header>

    <section class="news-hero">
        <div class="news-hero-inner">
            <h1>Our Team</h1>
            <p>Meet the founding and leadership team behind DCI.</p>
        </div>
    </section>

    <main class="team-main">
        <div class="team-grid" id="teamGrid">
            <!-- Team cards populated by script -->
        </div>
    </main>

    <!-- overlay + panel -->
    <div class="team-overlay" id="teamOverlay" aria-hidden="true">
        <div class="backdrop" id="teamBackdrop"></div>
        <aside class="team-panel" role="dialog" aria-modal="true" id="teamPanel">
            <button class="close-btn" id="teamClose">✕</button>
            <div class="panel-inner" id="panelInner">
                <!-- Filled dynamically -->
            </div>
        </aside>
    </div>

    <footer class="footer-section">
        <div class="footer-content">
            <div class="footer-left">
                <div class="footer-logo">

                <a href="#" target="_blank">
                    <img src="./image/DC Logo_white.png" alt="DCI Logo" class="footer-logo-image">
                </a>

                </div>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            <div class="footer-right">
                <p><strong>Contact</strong></p>
                <p><i class="fas fa-envelope"></i>&nbsp<a href="mailto:contact@dcinvest.vn">contact@dcinvest.vn</a></p>
                <p><i class="fas fa-phone"></i>&nbsp 19006022</p>
            </div>
        </div>
    </footer>

<script>
// Sample team members - adjust images/titles/bios/linkedin as needed
const teamMembers = [
    { id: 'founder1', name: 'Nam Nguyen', title: 'Founding Partner & Chairman', image: './image/aNam1.jpg', bgImage: './image/bg.NamNT.png', linkedin: 'https://www.linkedin.com/in/nam-nguyen-2b48aa77/', facebook: 'https://www.facebook.com/paradon', email: 'namnt@dichung.vn' },
    { id: 'founder2', name: 'Minh Hoang', title: 'Founding Partner & CEO', image: './image/H2M_crop.png', bgImage: './image/bg.MinhHH.png', linkedin: 'https://www.linkedin.com/in/hoanghongminh/', facebook: 'https://www.facebook.com/Minh.Hoang.H', email: 'minhhh@dcinvest.vn' },
    { id: 'founder3', name: 'Jen Vu Huong', title: 'Founding Partner & CSO', image: './image/JenVuhuong.webp', bgImage: './image/bg.JenVuHuong.png', linkedin: 'https://www.linkedin.com/in/jenvuhuong/', facebook: 'https://www.facebook.com/JenEmpowerLeaders', email: 'jenvuhuong@gmail.com' },
];

const grid = document.getElementById('teamGrid');
teamMembers.forEach(member => {
    const card = document.createElement('div');
    card.className = 'team-card';
    card.setAttribute('data-id', member.id);
    card.innerHTML = `
        <img src="${member.image}" alt="${member.name}">
        <div class="card-body">
            <h3>${member.name}</h3>
            <p>${member.title}</p>
        </div>
    `;
    card.addEventListener('click', () => openPanel(member));
    grid.appendChild(card);
});

const overlay = document.getElementById('teamOverlay');
const backdrop = document.getElementById('teamBackdrop');
const panel = document.getElementById('teamPanel');
const panelInner = document.getElementById('panelInner');
const closeBtn = document.getElementById('teamClose');

// --- Markdown-aware team panel loader --------------------------------------------------
// small markdown -> HTML converter (supports headings, lists, links, bold, italic, paragraphs)
function markdownToHTML(md) {
    if (!md) return '';
    // strip CRs, normalize
    md = md.replace(/\r/g, '');
    // basic link, bold, italic inline replacements
    md = md.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
    md = md.replace(/\*(.+?)\*/g, '<em>$1</em>');
    md = md.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');

    // block-level: headings
    md = md.replace(/^###### (.+)$/gm, '<h6>$1</h6>');
    md = md.replace(/^##### (.+)$/gm, '<h5>$1</h5>');
    md = md.replace(/^#### (.+)$/gm, '<h4>$1</h4>');
    md = md.replace(/^### (.+)$/gm, '<h3>$1</h3>');
    md = md.replace(/^## (.+)$/gm, '<h2>$1</h2>');
    md = md.replace(/^# (.+)$/gm, '<h1>$1</h1>');

    // unordered lists
    md = md.replace(/^\s*[-*] (.+)$/gm, '<li>$1</li>');
    md = md.replace(/(<li>[\s\S]+?<\/li>)/g, function(m) {
        // wrap consecutive list items in <ul>
        return m.replace(/(?:<\/li>\s*<li>)/g, '</li><li>');
    });
    // collapse adjacent <li> into ul blocks
    md = md.replace(/(?:<\/li>\n?)(?=<li>)/g, '');
    md = md.replace(/(?:^|\n)(<li>[\s\S]+?<\/li>)(?:\n|$)/g, function(_, items) {
        return '<ul>' + items + '</ul>\n';
    });

    // blockquotes
    md = md.replace(/^\> (.+)$/gm, '<blockquote>$1</blockquote>');

    // paragraphs (lines separated by blank line)
    const blocks = md.split(/\n{2,}/).map(block => block.trim()).filter(Boolean);
    const html = blocks.map(block => {
        if (/^<\/?(h\d|ul|li|blockquote|pre|img|a|p|strong|em)/i.test(block)) {
            return block;
        }
        // if block already contains list or heading tags, return as-is
        if (/^<h|^<ul|^<blockquote/.test(block)) return block;
        // otherwise wrap in <p>
        return '<p>' + block.replace(/\n/g, '<br>') + '</p>';
    }).join('\n\n');

    return html;
}

// try to fetch markdown profile by member id or slug
async function fetchMarkdownForMember(member) {
    const candidates = [
        `./team-profiles/${member.id}.md`,
        `./team-profiles/${(member.name || '').toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g,'')}.md`
    ];
    for (const url of candidates) {
        try {
            const res = await fetch(url);
            if (!res.ok) continue;
            const text = await res.text();
            // support optional YAML frontmatter (---)
            if (text.startsWith('---')) {
                const parts = text.split('---');
                // parts[1] = frontmatter, parts[2] = body (may include extra --- but common case)
                const body = parts.slice(2).join('---').trim();
                // simple frontmatter parse (key: value)
                const fmLines = parts[1].split('\n').map(l => l.trim()).filter(Boolean);
                const fm = {};
                fmLines.forEach(line => {
                    const idx = line.indexOf(':');
                    if (idx > -1) {
                        const k = line.slice(0, idx).trim();
                        const v = line.slice(idx+1).trim();
                        fm[k] = v.replace(/^['"]|['"]$/g,'');
                    }
                });
                return { body, fm };
            }
            return { body: text, fm: null };
        } catch (err) {
            // continue to next candidate
        }
    }
    return null;
}

async function openPanel(member) {
    // prefer a horizontal bg image when available
    const topImgSrc = member.bgImage || member.image;
    // try fetch md
    const mdRes = await fetchMarkdownForMember(member);
    let contentHTML = '';
    if (mdRes && mdRes.body) {
        contentHTML = markdownToHTML(mdRes.body);
        // if frontmatter contained alternate title/link, merge
        if (mdRes.fm && mdRes.fm.linkedin) {
            member.linkedin = mdRes.fm.linkedin;
        }
        if (mdRes.fm && mdRes.fm.title) {
            member.title = mdRes.fm.title;
        }
    } else {
        // fallback: simple bio + fields
        contentHTML = `<h3>Overview</h3><p>${member.bio || ''}</p>`;
    }

    // build panel HTML: top image then two-column meta + markdown body (body displayed in right column)
    panelInner.innerHTML = `
        <img class="panel-top-img" src="${topImgSrc}" alt="${member.name}">
        <div class="panel-body">
            <div class="panel-left" aria-hidden="false">
                <h2>${member.name}</h2>
                <div class="panel-title">${member.title || ''}</div>
                <div class="social-links">
                    ${member.linkedin ? `<a href="${member.linkedin}" target="_blank" rel="noopener noreferrer" title="LinkedIn"><i class="fab fa-linkedin"></i></a>` : ''}
                    ${member.facebook ? `<a href="${member.facebook}" target="_blank" rel="noopener noreferrer" title="Facebook"><i class="fab fa-facebook"></i></a>` : ''}
                    ${member.email ? `<a href="mailto:${member.email}" title="Email"><i class="fas fa-envelope"></i></a>` : ''}
                </div>
            </div>
            <div class="panel-right">
                ${contentHTML}
            </div>
        </div>
    `;
    overlay.classList.add('show');
    overlay.setAttribute('aria-hidden','false');
}

function closePanel() {
    overlay.classList.remove('show');
    overlay.setAttribute('aria-hidden','true');
}

backdrop.addEventListener('click', closePanel);
closeBtn.addEventListener('click', closePanel);
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closePanel(); });
</script>
<script src="script.js"></script>
</body>
</html>
